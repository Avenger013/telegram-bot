from aiogram import Router, F
from aiogram.types import Message, CallbackQuery
from aiogram.filters import CommandStart
from aiogram.fsm.context import FSMContext

import application.keyboard as kb

router = Router(name=__name__)


@router.message(CommandStart())
async def smd_start(message: Message):
    welcome_text = (
        f"–ü—Ä–∏–≤–µ—Ç, <b>{message.from_user.first_name}</b>, –¥–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!\n\n"
        "–í–æ—Ç —á—Ç–æ —Ç—ã –º–æ–∂–µ—à—å –¥–µ–ª–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞:\n\n"
        "üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç - /profile\n\n"
        "üìö –û—Ç–ø—Ä–∞–≤–∫–∞ –î–ó - /homework\n"
        "üèÜ –£–∑–Ω–∞—Ç—å –ª–∏–¥–µ—Ä–∞ —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞ - /leader\n"
        "üìä –¢–û–ü —É—á–µ–Ω–∏–∫–æ–≤ –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è - /top\n\n"
        "üéÅ –°–∏—Å—Ç–µ–º–∞ –±–∞–ª–ª–æ–≤:\n"
        "‚îú –£–∑–Ω–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–æ–∏—Ö –±–∞–ª–ª–æ–≤ –º–æ–∂–Ω–æ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ\n"
        "‚îú –ë–∞–ª–ª—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π, –∞ —Ç–∞–∫–∂–µ –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π –æ—Ç —à–∫–æ–ª—ã\n"
        "‚îú –ë–∞–ª–ª—ã –º–æ–∂–Ω–æ –æ–±–º–µ–Ω—è—Ç—å –Ω–∞ –ø–æ–¥–∞—Ä–∫–∏: –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∑–∞–Ω—è—Ç–∏—è, —Ñ—É—Ç–±–æ–ª–∫–∏ –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ\n"
        "‚îú –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Å–∏—Å—Ç–µ–º–µ –±–∞–ª–ª–æ–≤ –∏ –ø–æ–¥–∞—Ä–∫–∞—Ö - /monetization\n\n"
        "üíé –î–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π:\n"
        "‚îú –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä—è—Ç—å –¥–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è —É—á–µ–Ω–∏–∫–æ–≤ –∏ –Ω–∞—á–∏—Å–ª—è—Ç—å –∑–∞ —ç—Ç–æ –±–∞–ª–ª—ã\n\n"
        "‚ùî –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —á–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã –≤–æ–ø—Ä–æ—Å—ã –≤—ã –Ω–∞–π–¥–µ—Ç–µ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã - /info\n\n"
        "–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –±–æ—Ç–∞ –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç –Ω–∞—Å —Å–æ–æ–±—â–µ–Ω–∏–π, —Ä–∞—Å—Å—ã–ª–æ–∫ –∏ —Ä–µ–∫–ª–∞–º—ã."
    )
    await message.answer(text=welcome_text, parse_mode='HTML', reply_markup=kb.menu)


@router.callback_query(F.data.startswith('cancellation'))
async def call_cancellation(callback: CallbackQuery, state: FSMContext):
    await state.clear()
    welcome_text = (
        f"–ü—Ä–∏–≤–µ—Ç, <b>{callback.from_user.first_name}</b>, –¥–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!\n\n"
        "–í–æ—Ç —á—Ç–æ —Ç—ã –º–æ–∂–µ—à—å –¥–µ–ª–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞:\n\n"
        "üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç - /profile\n\n"
        "üìö –û—Ç–ø—Ä–∞–≤–∫–∞ –î–ó - /homework\n"
        "üèÜ –£–∑–Ω–∞—Ç—å –ª–∏–¥–µ—Ä–∞ —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞ - /leader\n"
        "üìä –¢–û–ü —É—á–µ–Ω–∏–∫–æ–≤ –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è - /top\n\n"
        "üéÅ –°–∏—Å—Ç–µ–º–∞ –±–∞–ª–ª–æ–≤:\n"
        "‚îú –£–∑–Ω–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–æ–∏—Ö –±–∞–ª–ª–æ–≤ –º–æ–∂–Ω–æ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ\n"
        "‚îú –ë–∞–ª–ª—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π, –∞ —Ç–∞–∫–∂–µ –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π –æ—Ç —à–∫–æ–ª—ã\n"
        "‚îú –ë–∞–ª–ª—ã –º–æ–∂–Ω–æ –æ–±–º–µ–Ω—è—Ç—å –Ω–∞ –ø–æ–¥–∞—Ä–∫–∏: –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∑–∞–Ω—è—Ç–∏—è, —Ñ—É—Ç–±–æ–ª–∫–∏ –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ\n"
        "‚îú –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Å–∏—Å—Ç–µ–º–µ –±–∞–ª–ª–æ–≤ –∏ –ø–æ–¥–∞—Ä–∫–∞—Ö - /monetization\n\n"
        "üíé –î–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π:\n"
        "‚îú –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä—è—Ç—å –¥–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è —É—á–µ–Ω–∏–∫–æ–≤ –∏ –Ω–∞—á–∏—Å–ª—è—Ç—å –∑–∞ —ç—Ç–æ –±–∞–ª–ª—ã\n\n"
        "‚ùî –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —á–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã –≤—ã –Ω–∞–π–¥–µ—Ç–µ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã - /info\n\n"
        "–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –±–æ—Ç–∞ –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç –Ω–∞—Å —Å–æ–æ–±—â–µ–Ω–∏–π, —Ä–∞—Å—Å—ã–ª–æ–∫ –∏ —Ä–µ–∫–ª–∞–º—ã."
    )
    await callback.message.edit_text(text=welcome_text, parse_mode='HTML', reply_markup=kb.back3)
